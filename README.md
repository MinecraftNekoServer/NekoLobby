# NekoLobby

高危漏洞提示
MySQL Connector Java » 8.0.33存在`CVE-2023-22102`高危漏洞！请谨慎连接未知来源的数据库

一个功能丰富的Minecraft服务器大厅插件，为玩家提供便捷的游戏体验。

## 功能列表

### 基础功能
- **出生点设置与传送**：管理员可设置全局出生点，玩家加入时自动传送
- **时间锁定**：锁定服务器时间为白天（6000 ticks），天气晴朗无雨
- **实体生成控制**：禁止除玩家和掉落物外的所有实体生成
- **加入/退出消息移除**：隐藏玩家加入和退出服务器的默认消息
- **活动范围限制**：限制玩家只能在指定的XZ坐标范围内活动，超出范围会被拉回上一个位置或出生点

### 物品系统
- **游戏菜单**：在物品栏第1格放置指南针，右键执行`/menu`指令
- **个人档案**：在物品栏第2格放置玩家头颅，右键查看个人信息（包含二次元风格GUI）
- **隐身功能**：在物品栏第8格放置黄绿色染料，右键切换玩家显示/隐藏
- **物品保护**：禁止丢弃和移动特殊物品
- **放置限制**：禁止放置指南针和玩家头颅

### 世界保护
- **建筑权限控制**：只有拥有`nekospawn.build`权限的玩家可以破坏和放置方块
- **方块交互限制**：无权限玩家无法与方块交互

### 飞行系统
- **权限飞行**：拥有`nekospawn.fly`权限的玩家可使用飞行功能
- **双击空格切换**：无需输入指令，双击空格键即可切换飞行状态

### 个人档案系统
- **二次元风格GUI**：美观的个人档案界面，包含装饰性元素
- **多数据集成**：整合多个插件的数据展示
- **LuckPerms集成**：显示玩家权限组和称号
- **数据库集成**：从多个数据库获取玩家信息

## 权限列表

| 权限节点 | 描述 | 默认 |
|---------|------|------|
| `nekospawn.setspawn` | 设置出生点权限 | OP |
| `nekospawn.build` | 建筑和交互权限 | OP |
| `nekospawn.fly` | 飞行权限 | OP |
| `nekospawn.setrange` | 设置活动范围权限 | OP |

## 指令

| 指令 | 描述 | 权限 |
|------|------|------|
| `/spawn set` | 设置出生点 | `nekospawn.setspawn` |
| `/setrange <point1\|point2>` | 设置活动范围点为当前位置 | `nekospawn.setrange` |

## 配置文件

插件会自动生成`config.yml`配置文件，包含以下设置：

```yaml
# 出生点设置
spawn:
  world: world
  x: 0.0
  y: 64.0
  z: 0.0
  yaw: 0.0
  pitch: 0.0

# 活动范围设置 (x, z 坐标)，默认为0表示不限制
activity-range:
  # 点1坐标
  point1:
    x: 0
    z: 0
  # 点2坐标
  point2:
    x: 0
    z: 0

# 数据库配置
database:
  host: localhost
  port: 3306
  username: root
  password: wcjs123
```

## 数据库集成

插件集成了多个数据库以提供丰富的玩家信息：

- **Authme数据库**：玩家注册和登录信息
- **NekoLevel数据库**：玩家等级和经验值
- **NekoBedwars数据库**：起床战争游戏统计数据
- **ThePit数据库**：天坑乱斗游戏统计数据

## 依赖插件

- **LuckPerms**：权限组和称号显示
- **PlaceholderAPI**：占位符支持

## 兼容性

- 支持 Minecraft 1.12.2+ 版本
- 向下兼容旧版本材料名称

## 安装

1. 将插件文件放入 `plugins` 文件夹
2. 确保已安装 LuckPerms 和 PlaceholderAPI 插件
3. 配置数据库连接信息
4. 重启服务器
5. 根据需要配置权限和出生点